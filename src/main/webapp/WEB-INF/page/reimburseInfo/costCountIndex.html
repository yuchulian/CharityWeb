#@layout()
#define main()
	<div class="row">
	<div class="col-md-12">
		<div class="panel panel-visible">
		
			<!-- <div class="panel-heading">
				<ol class="breadcrumb" id="projectInfo_menu"> </ol>
			</div> -->
			<div class="panel-body pn">
				<div id="datatable2_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">
					<table class="table table-striped table-hover dataTable no-footer" id="costCountTable">
						<thead>
							<tr>
								<th>&nbsp;</th>
								<th class="sorting_asc">编号</th>
								<th class="sorting_disabled">部门</th>
							</tr>
						</thead>
						<tbody> </tbody>
					</table>
				</div>
			</div>
			
		</div>
	</div>
</div>

<script type="text/javascript">
util.initPage("/reimburseInfoData/costCount", {}, function(data) {
	var tableHTML = [],
		obj = {},
		costCountList = data.list,
		costMap = {};
		console.info(costCountList);
	for (var i = 0; i < costCountList.length; i++) {
		obj = costCountList[i];
		if(costMap[obj.project_department_name]){
			costMap[obj.project_department_name].push(obj);
		}else{
			costMap[obj.project_department_name] = [obj];
			
		}
	}
	for(var cost in costMap){
		var costvalue = costMap[cost];
		tableHTML.push('<tr>');
		tableHTML.push('<td rowspan = "',(costvalue.length+1),'">');
		tableHTML.push(cost);
		tableHTML.push('</td>');
		tableHTML.push('</tr>');
		for(var i = 0;i< costvalue.length;i++){
			obj = costvalue[i];
			tableHTML.push('<tr>');
			tableHTML.push('<td>');
			tableHTML.push(obj.employ_name);
			tableHTML.push('</td>');
			tableHTML.push('<td>');
			tableHTML.push(obj.cost_count);
			tableHTML.push('</td>');
			tableHTML.push('</tr>');
		}
	}
	$("#costCountTable tbody").html(tableHTML.join(""));
});
</script>
#end