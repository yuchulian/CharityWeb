<style type="text/css">
	#projectTable{ width: 1024px; word-wrap:break-word; word-break:break-all; }
	#projectTable tr:nth-child(1) > *{ border: none; border-bottom: 1px solid #ccc; }
	#projectTable select{ width: 100%; height: 100%; }
	#projectTable label{ margin-right: 15px; }
	#projectTable th, #projectTable td{ border: 1px solid #ccc; text-align: center; height: 40px; line-height: auto; }
</style>
<div class="form-horizontal">		
	<table align="center" id="projectTable">
		<tr>
			<td class="width100"></td>
			<td class="width100"></td>
			<td class="width100"></td>
			<td class="width100"></td>
			<td class="width100"></td>
			<td class="width100"></td>
			<th class="width100">更新时间:</th>
			<td colspan="2">#(projectInfo.project_update_time)</td>
		</tr>
		<tr>
			<th>项目编号</th>
			<td colspan="5">
				#(projectInfo.project_number)
			</td>
			<th>填表时间</th>
			<td colspan="2">#(projectInfo.project_create_time)</td>
		</tr>
		<tr>
			<th>项目所在单位</th>
			<td>
				#(projectInfo.project_unit_name)
			</td>
			<th>项目主管</th>
			<td>田七</td>
			<th>收集人</th>
			<td>
				#(projectInfo.project_collector_name)
			</td>
			<th>所属部门</th>
			<td colspan="2">
				#(projectInfo.project_department_name)
			</td>
		</tr>
		<tr>
			<th>项目名称</th>
			<th>项目预算</th>
			<th colspan="2">项目情况</th>
			<th>资金落实情况</th>
			<th>单位接口人</th>
			<th>主管、部门负责人</th>
			<th class="width100">主管领导</th>
			<th>备注</th>
		</tr>
		<tr>
			<td>#(projectInfo.project_name)</td>
			<td>#(projectInfo.project_budget)</td>
			<td colspan="2">#(projectInfo.project_situation)</td>
			<td>#(projectInfo.project_capital_situation)</td>
			<td>单位接口人</td>
			<td>主管、部门负责人</td>
			<td>主管领导</td>
			<td>#(projectInfo.project_remark)</td>
		</tr>
		<tr>
			<th rowspan="2">项目类别</th>
			<td rowspan="2">
				#(projectInfo.project_type_name)
			</td>
			<td rowspan="2" colspan="2">
				项目优先级别
				<span style="color: red;">
					#if(1 == projectInfo.project_priority)
						A
					#elseif(1 == projectInfo.project_priority)
						B
					#else
						C
					#end
				</span>
				<br/>
				(A代表重大项目且成交性高;B代表不同项目且成交性高;C代表成交性的不确定)
			</td>
			<td colspan="5">
				申请项目推进费用:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;元<br/>
				<span style="color: red;">(若申请项目推进费用高于项目总费用的1%,请说明理由)</span>
			</td>
		</tr>
		<tr>
			<th>理由</th>
			<td colspan="4">#(projectInfo.project_push_excess)</td>
		</tr>
	</table>	
	#if(null != session.activitiMap)
	<div class="form-group">
				<label class="col-sm-2 control-label">历史批注信息</label>
		<div class="col-sm-9">
			#for(comment : session.activitiMap.commentList)
				<div>
					批注人：#(comment.userId)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					批注时间：#(comment.time)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					批注内容：#(comment.fullMessage)
				</div>
			#end
		</div>
	</div>

	<div class="form-group">
		<label class="col-sm-2 control-label">我的批注</label>
		<div class="col-sm-9">
			<textarea class="form-control" id="message"></textarea>
		</div>
	</div>

	<div class="form-group">
		<label class="col-sm-2 control-label"><span class="red">*</span>我的上级</label>
		<div class="col-sm-9">
			<select class="form-control" id="assignee">
				#for(employView : employViewList)
					<option value="#(employView.id)">#(employView.employ_name)</option>
				#end
			</select>
		</div>
	</div>

	
	<div class="form-group">
		<div class="col-sm-12" style="text-align: center;">
			#for(sequenceFlow : session.activitiMap.sequenceFlowList)
				<button type="button" class="btn btn-primary btn-gradient dark"
						onclick="selectSequenceFlow(this);">#(sequenceFlow)</button>
			#end
		</div>
	</div>
	
	<script type="text/javascript">
		function selectSequenceFlow(self) {
			var sequenceFlow = $.trim($(self).text()), assignee = $("#assignee").val();
			if(sequenceFlow == "通过" || sequenceFlow == "不通过") {
				if(sequenceFlow == "不通过") {
					assignee = #(projectInfo.project_collector);
				}
				util.call("/activitiData/taskComplete", {
					taskId : "#(session.activitiMap.task.id)",
					id : "#(projectInfo.id)",
					message : $.trim($("#message").val()),
					sequenceFlow : sequenceFlow,
					assignee : assignee,
					tableInfo : "project_state,3"
				}, function(returnMap) {
					util.alert(returnMap["returnMsg"]);
					util.closeModal("#projectTable");
					taskList();
				});
			} else if(sequenceFlow == "授权他人审核") {
				util.alert("待开发……");
			}
		}
	</script>
	#end
</div>